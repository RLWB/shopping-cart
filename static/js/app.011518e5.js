(function(){"use strict";var t={5025:function(t,e,r){r.r(e),r.d(e,{default:function(){return u}});r(7658);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cart"},[t.isComponents?t._e():e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),e("el-breadcrumb-item",[t._v("购物车")])],1),e("el-table",{attrs:{data:t.lists}},[t.isComponents?t._e():e("el-table-column",{attrs:{width:"60px"},scopedSlots:t._u([{key:"header",fn:function(r){return[e("el-checkbox",{model:{value:t.handleCheckedAllStatus,callback:function(e){t.handleCheckedAllStatus=e},expression:"handleCheckedAllStatus"}})]}},{key:"default",fn:function(r){return[e("el-checkbox",{attrs:{value:r.row.checked},on:{change:e=>t.SET_CART({type:"update",id:r.row.id,checked:!0})}})]}}],null,!1,2687107405)}),e("el-table-column",{attrs:{prop:"title",label:"商品"}}),e("el-table-column",{attrs:{prop:"price",label:"单价"}}),e("el-table-column",{attrs:{label:"数量"},scopedSlots:t._u([{key:"default",fn:function(r){return[t.isComponents?e("span",[t._v(t._s(r.row.count))]):e("el-input-number",{attrs:{value:r.row.count,min:1,size:"mini"},on:{change:(e,n)=>t.handleChange(e,n,r.row.id)}})]}}])}),e("el-table-column",{attrs:{label:"小计"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s((e.row.price*e.row.count).toFixed(2))+" ")]}}])}),e("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.SET_CART({type:"del",id:r.row.id})}}},[t._v("删除")])]}}])})],1),t.isComponents?e("div",{staticStyle:{padding:"15px 0"}},[e("p",[t._v("共计 "+t._s(t.totalCount)+" 件商品，总价："+t._s(t.totalPrice))])]):e("div",{staticStyle:{padding:"15px 0"}},[e("p",[t._v("已选 "+t._s(t.checkedCount)+" 件商品，总价："+t._s(t.checkedPrice))])]),t.isComponents?e("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.$router.push("/cart")}}},[t._v("去购物车")]):e("el-button",{attrs:{type:"danger"}},[t._v("结算")])],1)},o=[],a=r(2025),c={name:"",data(){return{}},props:{isComponents:{type:Boolean,default:!1}},computed:{...(0,a.rn)({lists:"cartLists"}),...(0,a.Se)(["checkedCount","checkedPrice","totalCount","totalPrice","checkedAllStatus"]),handleCheckedAllStatus:{get(){return this.checkedAllStatus},set(t){this.SET_CART({type:"update",all:!0,val:t})}}},created(){},methods:{...(0,a.OI)(["SET_CART"]),handleChange(t,e,r){console.log(t,e,r),e-t===1?this.SET_CART({type:"sub",id:r}):t-e===1?this.SET_CART({type:"add",id:r}):this.SET_CART({type:"update",id:r,count:t})}}},s=c,l=r(1001),i=(0,l.Z)(s,n,o,!1,null,"0c3a5e00",null),u=i.exports},9209:function(t,e,r){var n=r(6369),o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("header",{staticClass:"header"},[e("h1",[t._v("购物车示例")]),e("el-popover",{ref:"popover",attrs:{placement:"bottom",width:"400",trigger:"hover"}},[[e("Cart",{attrs:{isComponents:""}})]],2),e("el-badge",{attrs:{value:t.cartTotal}},[e("el-button",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],attrs:{type:"primary"}},[t._v("我的购物车")])],1)],1),e("router-view")],1)},a=[],c=r(2025),s=r(5025),l={components:{Cart:s["default"]},data:{},computed:{...(0,c.Se)(["cartTotal"])}},i=l,u=r(1001),d=(0,u.Z)(i,o,a,!1,null,null,null),p=d.exports,f=r(2631),h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),e("el-breadcrumb-item",[t._v("商品列表")])],1),e("el-table",{attrs:{data:t.lists}},[e("el-table-column",{attrs:{prop:"title",label:"商品"}}),e("el-table-column",{attrs:{prop:"price",label:"价格"}}),e("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-button",{on:{click:function(e){return t.handleAdd({type:"add",id:r.row.id})}}},[t._v("加入购物车")])]}}])})],1)],1)},m=[],v={name:"HomeView",data(){return{name:123}},components:{},computed:{...(0,c.rn)({lists:"goodsLists"})},methods:{...(0,c.nv)(["get_goods"]),...(0,c.OI)({handleAdd:"SET_CART"})},created(){this.get_goods()}},b=v,g=(0,u.Z)(b,h,m,!1,null,"76032538",null),_=g.exports;n["default"].use(f.ZP);const S=[{path:"/",name:"main",component:_},{path:"/cart",name:"cart",component:()=>Promise.resolve().then(r.bind(r,5025))}],k=new f.ZP({mode:"hash",base:"/",routes:S});var y=k,C=(r(7658),r(3177));n["default"].use(c.ZP);const L=new c.ZP.Store({state:{goodsLists:[],cartLists:localStorage.getItem("cartLists")?JSON.parse(localStorage.getItem("cartLists")):[]},getters:{cartTotal(t){let e=0;return t.cartLists.map((t=>{e+=t.count})),e},checkedCount(t){let e=0;return t.cartLists.map((t=>{t.checked&&(e+=t.count)})),e},checkedPrice(t){let e=0;return t.cartLists.map((t=>{t.checked&&(e+=t.count*t.price)})),e.toFixed(2)},totalCount(t){let e=0;return t.cartLists.map((t=>{e+=t.count})),e},totalPrice(t){let e=0;return t.cartLists.map((t=>{e+=t.count*t.price})),e.toFixed(2)},checkedAllStatus(t){return console.log(123),t.cartLists.every((t=>t.checked))}},mutations:{SET_GOODS(t,e){t.goodsLists=e},SET_CART(t,e){let r=t.cartLists.findIndex((t=>t.id===e.id));switch(e.type){case"add":let n=t.goodsLists.find((t=>t.id===e.id));r>=0?t.cartLists[r].count+=1:t.cartLists.push({id:e.id,title:n.title,price:n.price,count:1,checked:!1}),localStorage.setItem("cartLists",JSON.stringify(t.cartLists));break;case"sub":t.cartLists[r].count-=1,localStorage.setItem("cartLists",JSON.stringify(t.cartLists));break;case"update":e.count&&(t.cartLists[r].count=e.count),e.checked&&(t.cartLists[r].checked=!t.cartLists[r].checked),e.all&&t.cartLists.forEach((t=>t.checked=e.val)),localStorage.setItem("cartLists",JSON.stringify(t.cartLists));break;case"del":t.cartLists.splice(r,1),localStorage.setItem("cartLists",JSON.stringify(t.cartLists));break;default:break}}},actions:{async get_goods({commit:t}){try{const e=await C.Z.get("/products");t("SET_GOODS",e.data)}catch(e){console.log(e)}}}});var T=L,w=r(6350),O=r.n(w);n["default"].config.productionTip=!1,n["default"].use(O()),new n["default"]({router:y,store:T,render:t=>t(p)}).$mount("#app")}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.m=t,function(){r.amdO={}}(),function(){var t=[];r.O=function(e,n,o,a){if(!n){var c=1/0;for(u=0;u<t.length;u++){n=t[u][0],o=t[u][1],a=t[u][2];for(var s=!0,l=0;l<n.length;l++)(!1&a||c>=a)&&Object.keys(r.O).every((function(t){return r.O[t](n[l])}))?n.splice(l--,1):(s=!1,a<c&&(c=a));if(s){t.splice(u--,1);var i=o();void 0!==i&&(e=i)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[n,o,a]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){r.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,a,c=n[0],s=n[1],l=n[2],i=0;if(c.some((function(e){return 0!==t[e]}))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(l)var u=l(r)}for(e&&e(n);i<c.length;i++)a=c[i],r.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return r.O(u)},n=self["webpackChunkv2_demo"]=self["webpackChunkv2_demo"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=r.O(void 0,[998],(function(){return r(9209)}));n=r.O(n)})();
//# sourceMappingURL=app.011518e5.js.map